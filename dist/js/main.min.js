"use strict";function _createForOfIteratorHelper(e,t){var s,o,n,b,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return o=!(s=!0),{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),b=0,{s:t=function(){},n:function(){return b>=e.length?{done:!0}:{done:!1,value:e[b++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var s;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(s="Object"===(s=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:s)||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var gamePlate=document.querySelector(".game-box__plate"),navBar=document.querySelector(".navbar"),gameList=document.querySelector(".navbar__list-game"),navItems=gameList.querySelectorAll(".navbar__list__item"),counterMines=document.querySelector(".counter-mines"),begginer=[8,8,10],intermediate=[16,16,40],expert=[31,16,99],bombs=[],boxes=[],chosenLevel=begginer,countBoxes=function(e){return e[0]*e[1]},shuffle=function(e,t){for(var s=0;s<t;s++){var o=Math.floor(Math.random()*e);0===o||bombs.includes(o)?s--:bombs.push(o)}},GamePlate=_createClass(function e(t,s){_classCallCheck(this,e),this.id=t,this.bomb=s}),createGamePlate=function(e){for(var t=0;t<e;t++)boxes[t]=new GamePlate(t,!1)},plantBombs=function(){boxes.forEach(function(e){bombs.includes(e.id)&&(e.bomb=!0)})},drawGamePlate=function(e){for(var t=0;t<e;t++){var s=document.createElement("div");s.setAttribute("id",t),gamePlate.append(s),s.classList.add("game-box__plate__element")}counterMines.innerHTML="0".concat(chosenLevel[2])},clearPlate=function(){gamePlate.innerHTML="",bombs=[],boxes=[]},newGame=function(){clearPlate(),counterMines.innerHTML="0".concat(chosenLevel[2]),shuffle(countBoxes(chosenLevel),chosenLevel[2]),createGamePlate(countBoxes(chosenLevel)),plantBombs(),drawGamePlate(countBoxes(chosenLevel))},chooseLevel=function(e){clearPlate(),e.target.classList.contains("begginer")?(chosenLevel=begginer,gamePlate.classList.remove("plate-intermediate"),gamePlate.classList.remove("plate-expert"),gamePlate.classList.add("plate-begginer")):e.target.classList.contains("intermediate")?(chosenLevel=intermediate,gamePlate.classList.remove("plate-begginer"),gamePlate.classList.remove("plate-expert"),gamePlate.classList.add("plate-intermediate")):e.target.classList.contains("expert")&&(chosenLevel=expert,gamePlate.classList.remove("plate-begginer"),gamePlate.classList.remove("plate-intermediate"),gamePlate.classList.add("plate-expert")),navItems.forEach(function(e){return e.classList.toggle("navbar__list-game__item")}),newGame()},unfoldMenu=function(e){e.target.classList.contains("navbar__list-game")&&navItems.forEach(function(e){return e.classList.toggle("navbar__list-game__item")})},putFlag=function(e){e.preventDefault(),e.target.classList.toggle("put-flag")},showAll=function(){var e,t=gamePlate.getElementsByClassName("game-box__plate__element"),s=_createForOfIteratorHelper(boxes);try{for(s.s();!(e=s.n()).done;){var o=e.value;!0!==o.bomb||t[o.id].classList.contains("put-flag")||t[o.id].classList.add("show-bomb"),!1===o.bomb&&t[o.id].classList.contains("put-flag")&&t[o.id].classList.add("wrong-bet")}}catch(e){s.e(e)}finally{s.f()}},bombsNumber=0,checkBombAround=function(e,t){var s=Number.parseFloat(e.target.id);0===s?(bombs.includes(s+1)&&bombsNumber++,bombs.includes(s+t)&&bombsNumber++,bombs.includes(s+(t+1))&&bombsNumber++):s===t-1?(bombs.includes(s-1)&&bombsNumber++,bombs.includes(s+t)&&bombsNumber++,bombs.includes(s+(t-1))&&bombsNumber++):s===t*t-t?(bombs.includes(s+1)&&bombsNumber++,bombs.includes(s-t)&&bombsNumber++,bombs.includes(s-(t-1))&&bombsNumber++):s===t*t-1?(bombs.includes(s-1)&&bombsNumber++,bombs.includes(s-t)&&bombsNumber++,bombs.includes(s-(t+1))&&bombsNumber++):s%t==0?(bombs.includes(s-t)&&bombsNumber++,bombs.includes(s-t+1)&&bombsNumber++,bombs.includes(s+1)&&bombsNumber++,bombs.includes(s+t)&&bombsNumber++,bombs.includes(s+t+1)&&bombsNumber++):(s+1)%t==0?(bombs.includes(s-t)&&bombsNumber++,bombs.includes(s-t-1)&&bombsNumber++,bombs.includes(s-1)&&bombsNumber++,bombs.includes(s+t)&&bombsNumber++,bombs.includes(s+t-1)&&bombsNumber++):s-t<0?(bombs.includes(s-1)&&bombsNumber++,bombs.includes(s+1)&&bombsNumber++,bombs.includes(s+t+1)&&bombsNumber++,bombs.includes(s+t)&&bombsNumber++,bombs.includes(s+t-1)&&bombsNumber++,console.log("pokaz mnie to")):t*t-t<s?(bombs.includes(s-1)&&bombsNumber++,bombs.includes(s+1)&&bombsNumber++,bombs.includes(s-t+1)&&bombsNumber++,bombs.includes(s-t)&&bombsNumber++,bombs.includes(s-t-1)&&bombsNumber++):(bombs.includes(s-1)&&bombsNumber++,bombs.includes(s+1)&&bombsNumber++,bombs.includes(s-t+1)&&bombsNumber++,bombs.includes(s-t)&&bombsNumber++,bombs.includes(s-t-1)&&bombsNumber++,bombs.includes(s+t+1)&&bombsNumber++,bombs.includes(s+t)&&bombsNumber++,bombs.includes(s+t-1)&&bombsNumber++),e.target.innerHTML=bombsNumber,bombsNumber=0},showEmpty=function(e){e.target.classList.add("show-empty"),checkBombAround(e,chosenLevel[0])},leftClick=function(e){e.target.classList.contains("put-flag")?e.preventDefault():!1===boxes[e.target.id].bomb?showEmpty(e):!0===boxes[e.target.id].bomb&&(e.target.classList.add("show-trigger"),showAll())};navBar.addEventListener("click",unfoldMenu),navItems.forEach(function(e){return e.addEventListener("click",chooseLevel)}),gamePlate.addEventListener("contextmenu",putFlag),gamePlate.addEventListener("click",leftClick),newGame();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZ2FtZVBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmF2QmFyIiwiZ2FtZUxpc3QiLCJuYXZJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudGVyTWluZXMiLCJiZWdnaW5lciIsImludGVybWVkaWF0ZSIsImV4cGVydCIsImJvbWJzIiwiYm94ZXMiLCJjaG9zZW5MZXZlbCIsImJveGVzQW1vdW50IiwiaSIsImJvbWJzQW1vdW50IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaW5jbHVkZXMiLCJyYW5kb21OdW0iLCJHYW1lUGxhdGUiLCJpZCIsImJvbWIiLCJzaHVmZmxlIiwidGhpcyIsImNyZWF0ZUdhbWVQbGF0ZSIsInB1c2giLCJmb3JFYWNoIiwiYm94IiwiZHJhd0dhbWVQbGF0ZSIsImVtcHR5Qm94IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZCIsInBsYW50Qm9tYnMiLCJhZGQiLCJjb25jYXQiLCJjbGVhclBsYXRlIiwiaW5uZXJIVE1MIiwiY291bnRCb3hlcyIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsIm5ld0dhbWUiLCJ0b2dnbGUiLCJpdGVtIiwicHJldmVudERlZmF1bHQiLCJzaG93QWxsIiwicGxhdGVFbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJfaXRlcmF0b3IiLCJzIiwiX3N0ZXAiLCJuIiwiZG9uZSIsInZhbHVlIiwidW5mb2xkTWVudSIsImJvbWJzTnVtYmVyIiwiTnVtYmVyIiwicGFyc2VGbG9hdCIsInJvd0xlbmd0aCIsImNoZWNrQm9tYkFyb3VuZCIsImNvbnNvbGUiLCJsb2ciLCJzaG93RW1wdHkiLCJsZWZ0Q2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwiY2hvb3NlTGV2ZWwiLCJwdXRGbGFnIl0sIm1hcHBpbmdzIjoiNmpEQUFBLElBQU1BLFVBQVlDLFNBQVNDLGNBQWMsa0JBQXZCLEVBQ1pDLE9BQVNGLFNBQVNDLGNBQWMsU0FBdkIsRUFDVEUsU0FBV0gsU0FBU0MsY0FBYyxvQkFBdkIsRUFDWEcsU0FBV0QsU0FBU0UsaUJBQWlCLHFCQUExQixFQUNYQyxhQUFlTixTQUFTQyxjQUFjLGdCQUF2QixFQUVmTSxTQUFXLENBQUMsRUFBRyxFQUFHLElBQ2xCQyxhQUFlLENBQUMsR0FBSSxHQUFJLElBQ3hCQyxPQUFTLENBQUMsR0FBSSxHQUFJLElBRXBCQyxNQUFRLEdBQ1JDLE1BQVEsR0FDUkMsWUFBY0wsU0FaWlIsV0FBWUMsU0FBQUEsR0FDbEIsT0FBTUUsRUFBU0YsR0FBU0MsRUFBYyxFQUN0QyxFQUVNSyxRQUFZLFNBQUFPLEVBQVlaLEdBRTlCLElBQU1NLElBQUFBLEVBQVEsRUFBR08sRUFBQUMsRUFBakJELENBQUEsR0FBQSxDQUNBLElBQU1OLEVBQVlRLEtBQUdDLE1BQVNELEtBQTlCRSxPQUE4QixFQUE5QkwsQ0FBa0IsRUFDSCxJQUFUSixHQUFOQyxNQUFBUyxTQUFBQyxDQUFBLEVBRUFOLENBQUlKLEdBRUpBLE1BQUlFLEtBQUFBLENBQUosQ0FFQSxDQWFDLEVBRUtTLFUsYUFYTixTQUFBQSxFQUFhQyxFQUFHQyxHQUFWQyxnQkFBQUEsS0FBQUEsQ0FBQUEsRUFDTEMsS0FBS0gsR0FBS0EsRUFhVEcsS0FaQUYsS0FBSUgsQ0FhSixDLEVBWkFNLGdCQUVPLFNBQUFiLEdBY1IsSUFiRUgsSUFBQUEsRUFBTWlCLEVBQUtQLEVBQUFBLEVBQVhOLENBQUEsR0FjREgsTUFiQ0csR0FBQSxJQUFBTyxVQUFBUCxFQUFBLENBQUEsQ0FBQSxDQVBILEVBV01PLFdBYWEsV0FDbEJWLE1BYnNCaUIsUUFBQSxTQUFBQyxHQWNqQm5CLE1BQU1TLFNBQVNVLEVBQUlQLEVBQW5CLElBYkpPLEVBQUtQLEtBQUwsQ0FBQSxFQWdCQSxDQUpELENBS0EsRUFYQVEsY0FBb0JqQixTQUFBQSxHQWNwQixJQWJDRixJQUFNRyxFQUFOLEVBQVdBLEVBQUlPLEVBQWFQLENBQUEsR0FBNUIsQ0FDQSxJQUFBaUIsRUFBQS9CLFNBQUFnQyxjQUFBLEtBQUEsRUFIRkQsRUFBQUUsYUFBQSxLQUFBbkIsQ0FBQSxFQWtCRWYsVUFBVW1DLE9BQU9ILENBQWpCLEVBWkZBLEVBQU1JLFVBQWFDLElBQUEsMEJBQW5CLENBQ0N6QixDQWNBTCxhQWJXYSxVQWFYLElBQUFrQixPQWJDekIsWUFBNEIsRUFhN0IsQ0FFQSxFQWpCRDBCLFdBQUEsV0FvQkN2QyxVQUFVd0MsVUFBWSxHQVp2QjdCLE1BQU1vQixHQWNMbkIsTUFiSyxFQWNMLEVBWENaLFFBQVVtQyxXQWNYSSxXQWJDUCxFQWNEekIsYUFiQ2lDLFVBYUQsSUFBQUYsT0FiQ3pCLFlBQUEsRUFhRCxFQUNBWSxRQUFRZ0IsV0FBVzVCLFdBQUQsRUFBZUEsWUFBWSxFQUF0QyxFQUNQYyxnQkFkYWEsV0FBYjNCLFdBQUEsQ0FBYTJCLEVBUGRKLFdBQUEsRUF1QkNMLGNBQWNVLFdBQVc1QixXQUFELENBQVgsQ0FaZCxFQUVDRixZQUFBLFNBQUErQixHQWNBSCxXQWJRLEVBSFRHLEVBQUFDLE9BQUFDLFVBQUFDLFNBQUEsVUFBQSxHQWtCRWhDLFlBQWNMLFNBWmhCUixVQUFhNEMsVUFBR0UsT0FBVkMsb0JBQU4sRUFDQ1IsVUFBVUssVUFBQUUsT0FBQSxjQUFWUCxFQUNBaEMsVUFBQUEsVUFBYWlDLElBQWIsZ0JBQUFqQyxHQUNRa0MsRUFBQUEsT0FBVzVCLFVBQUFBLFNBQWNBLGNBQXpCNEIsR0FDUmQsWUFBQUEsYUFDQVMsVUFBVVEsVUFBQUUsT0FBQSxnQkFBVlYsRUFDQUwsVUFBQUEsVUFBY1UsT0FBVzVCLGNBQXpCa0IsRUFORC9CLFVBQUE0QyxVQUFBUCxJQUFBLG9CQUFBLEdBcUJZSyxFQUFFQyxPQUFPQyxVQUFVQyxTQUFTLFFBQTVCLElBWlpoQyxZQUFpQkgsT0FDaEI2QixVQUFVSyxVQUFBRSxPQUFBLGdCQUFWUCxFQWNDdkMsVUFBVTRDLFVBQVVFLE9BQU8sb0JBQTNCLEVBYkQ5QyxVQUFNMkMsVUFBT0MsSUFBVUMsY0FBdkIsR0FnQkF4QyxTQWRDTCxRQUFVNEMsU0FBQUEsR0FBQUEsT0FBVUUsRUFBT0YsVUFBQUksT0FBQSx5QkFBUEYsQ0FBVkYsQ0FjWCxFQUVBRyxRQWRDL0MsQ0FlRCxFQVpDQSxXQUFVNEMsU0FBQUEsR0FDVjVDLEVBQUFBLE9BQVU0QyxVQUFVRSxTQUFPLG1CQUEzQjlDLEdBZUFLLFNBZEFMLFFBQVU0QyxTQUFBQSxHQUFWLE9BQUFLLEVBQXdCTCxVQUFBSSxPQUF4Qix5QkFBQSxDQUFBLENBY0EsQ0FFRCxFQVpDaEQsUUFBVTRDLFNBQUFBLEdBZVhGLEVBQUVRLGVBQUYsRUFDQVIsRUFkQ0MsT0FBQUMsVUFBQUksT0FBQSxVQWNELENBQ0EsRUFkcUJHLFFBQVNQLFdBaUI5QixJQWpCOEJBLEVBQTlCUSxFQUFBcEQsVUFBQXFELHVCQUFBLDBCQUFBLEVBQThCVCxFQUFBQSwyQkFsQi9CaEMsS0FrQitCZ0MsRUFBQUEsSUFsQi9CLElBQUFVLEVBQUFDLEVBQUEsRUFBQSxFQUFBQyxFQUFBRixFQUFBRyxFQUFBLEdBQUFDLE1BQUEsQ0FBQSxJQUFBNUIsRUFBQTBCLEVBQUFHLE1Bc0NtQixDQUFBLElBQWI3QixFQUFJTixNQWZKb0MsRUFBYTlCLEVBQWI4QixJQUFBQSxVQUFrQmYsU0FBQSxVQUFsQmUsR0FDTFIsRUFBYVIsRUFBQUEsSUFBVUMsVUFBU1IsSUFBQSxXQUFoQyxFQUNDLENBQUEsSUFBQVAsRUFBQU4sTUFDQTRCLEVBQUF0QixFQUFBUCxJQUFBcUIsVUFBQUMsU0FBQSxVQUFBLEdBSEZPLEVBQUF0QixFQUFBUCxJQUFBcUIsVUFBQVAsSUFBQSxXQUFBLENBT0NLLENBWjhCRSxDQUFBQSxNQUFBQSxHQUFBQSxFQUFBQSxFQUFBQSxDQUFBQSxDQUFBQSxDQUFBQSxRQUFBQSxFQUFBQSxFQUFBQSxDQUFBQSxDQStCOUIsRUFFR2lCLFlBQWMsRUFoQlhULGdCQUFnQnBELFNBQUFBLEVBQUFBLEdBbUJ0QixJQUFJdUIsRUFBS3VDLE9BQU9DLFdBQVdyQixFQUFFQyxPQUFPcEIsRUFBM0IsRUFwQlksSUFBQUEsR0F1QmhCWixNQUFNUyxTQUFTRyxFQUFLLENBQXBCLEdBdkJnQnNDLFdBQUEsR0FHSWxELE1BQWRtQixTQUFjUCxFQUFBeUMsQ0FBQSxHQXdCdkJILFdBQVcsR0FFUmxELE1BeEJDUyxTQUFDZ0MsR0FBY3RCLEVBQVFjLEVBd0J4QixHQUNIaUIsV0F4QkNULElBRUQ3QixJQUFBeUMsRUFBQSxHQUNEckQsTUFBSW1CLFNBQUFQLEVBQWEsQ0FBakIsR0EwQkNzQyxXQXpCSVQsR0EyQkR6QyxNQXpCRlMsU0FBQUcsRUFBQXlDLENBeUJFLEdBQ0hILFdBekJBLEdBYm1CbEQsTUFBQVMsU0FBQUcsR0FBQXlDLEVBQUEsRUFBQSxHQXlDbkJILFdBekNtQixJQUFBdEMsSUFBQXlDLEVBQUFBLEVBQUFBLEdBQXRCckQsTUFBQVMsU0FBQUcsRUFBQSxDQUFBLEdBOENHc0MsV0FBVyxHQUVSbEQsTUFBTVMsU0FBU0csRUFBS3lDLENBQXBCLEdBN0JOSCxXQUFNSSxHQWdDQXRELE1BQU1TLFNBQVNHLEdBQU15QyxFQUFZLEVBQWpDLEdBOUJMSCxXQUFBLElBRUtsRCxJQUFNUyxFQUFWNEMsRUFBNEIsR0FFM0JyRCxNQUFBUyxTQUFBRyxFQUFBLENBQUEsR0FnQ0FzQyxXQUFXLEdBOUJYQSxNQUFBQSxTQUFXdEMsRUFBQXlDLENBQVhILEdBaUNBQSxXQWhDQSxHQUNEbEQsTUFBSUEsU0FBTVMsR0FBVzRDLEVBQWEsRUFBbEMsR0FrQ0NILFdBakNBQSxJQUVLdEMsRUFBTXlDLEdBQWMsR0FFMUJyRCxNQUFJQSxTQUFNUyxFQUFXNEMsQ0FBckIsR0FrQ0NILFdBakNBQSxHQW1DR2xELE1BQU1TLFNBQVNHLEVBQUt5QyxFQUFZLENBQWhDLEdBQ0hILFdBbENTekMsR0FFVFQsTUFBQVMsU0FBQUcsRUFBQSxDQUFBLEdBbUNBc0MsV0FBVyxHQWpDWEEsTUFBQUEsU0FBV3RDLEVBQUF5QyxDQUFYSCxHQW9DQUEsV0FuQ0EsR0FFRGxELE1BQUFTLFNBQUFHLEVBQUF5QyxFQUFBLENBQUEsR0FvQ0NILFdBbkNTekMsS0FFVEcsRUFBQSxHQUFBeUMsR0FBQSxHQUNEckQsTUFBSUEsU0FBTVMsRUFBVzRDLENBQXJCLEdBcUNDSCxXQXBDQUEsR0FzQ0dsRCxNQUFNUyxTQUFTRyxFQUFLeUMsRUFBWSxDQUFoQyxHQUNISCxXQXJDU3pDLEdBRVRULE1BQUFTLFNBQUFHLEVBQUEsQ0FBQSxHQVZLc0MsV0FXSXRDLEdBRVZaLE1BQUlBLFNBQU1TLEVBQVc0QyxDQUFyQixHQXNDQ0gsV0FyQ0FBLEdBdUNHbEQsTUFBTVMsU0FBU0csRUFBS3lDLEVBQVksQ0FBaEMsR0FDSEgsV0F0Q1N6QyxJQUVURyxFQUFBeUMsRUFBQSxHQUNEckQsTUFBSUEsU0FBTVMsRUFBVyxDQUFyQixHQXdDQ3lDLFdBdkNBQSxHQVRLbEQsTUFXQVMsU0FBUzRDLEVBQUFBLENBWFQsR0FtRExILFdBdkNELEdBRUNBLE1BQUFBLFNBQVd0QyxFQUFBeUMsRUFBQSxDQUFYSCxHQXdDQUEsV0F2Q0EsR0FDRGxELE1BQUlBLFNBQU1TLEVBQVc0QyxDQUFyQixHQXlDQ0gsV0F4Q0FBLEdBMENHbEQsTUFBTVMsU0FBU0csRUFBS3lDLEVBQVksQ0FBaEMsR0FDSEgsV0F6Q1N6QyxHQTJDVjhDLFFBekNDQyxJQUFBLGVBeUNELEdBQ2VILEVBQVlBLEVBQVlBLEVBQTdCekMsR0F4Q1RzQyxNQUFBQSxTQUFXdEMsRUFBQSxDQUFYc0MsR0EyQ0FBLFdBMUNBLEdBQ0RsRCxNQUFJQSxTQUFNUyxFQUFXLENBQXJCLEdBNENDeUMsV0EzQ0FBLEdBZktsRCxNQWlCQVMsU0FBSUcsRUFBV3lDLEVBQWMsQ0FqQjdCLEdBNkRMSCxXQTNDRCxHQUVDQSxNQUFBQSxTQUFXdEMsRUFBQXlDLENBQVhILEdBNENBQSxXQTNDQSxHQUNEbEQsTUFBSUEsU0FBTVMsRUFBVzRDLEVBQUYsQ0FBbkIsR0E2Q0NILFdBNUNBQSxLQUdBQSxNQUFBQSxTQUFXdEMsRUFBQSxDQUFYc0MsR0E4Q0FBLFdBN0NBLEdBQ0RsRCxNQUFJQSxTQUFNUyxFQUFXLENBQXJCLEdBK0NDeUMsV0E5Q0FBLEdBZ0RHbEQsTUFBTVMsU0FBU0csRUFBS3lDLEVBQVksQ0FBaEMsR0FDSEgsV0EvQ1N6QyxHQUVUVCxNQUFBUyxTQUFBRyxFQUFBeUMsQ0FBQSxHQWhCS0gsV0FpQkl0QyxHQUVWWixNQUFJQSxTQUFNUyxFQUFXNEMsRUFBTyxDQUE1QixHQWdEQ0gsV0EvQ0FBLEdBaURHbEQsTUFBTVMsU0FBU0csRUFBS3lDLEVBQVksQ0FBaEMsR0FDSEgsV0FoRFN6QyxHQUVUVCxNQUFBUyxTQUFBRyxFQUFBeUMsQ0FBQSxHQWlEQUgsV0FBVyxHQS9DWEEsTUFBQUEsU0FBV3RDLEVBQUF5QyxFQUFBLENBQVhILEdBa0RBQSxXQWpEQSxJQXFERm5CLEVBQUVDLE9BbERBSCxVQUFBcUIsWUFtREZBLFlBQWMsQ0FDZCxFQWpERU8sVUFBQSxTQUFBMUIsR0FvREZBLEVBQUVDLE9BQU9DLFVBQVVQLElBQUksWUFBdkIsRUFDQTRCLGdCQXBEYXZCLEVBQUE3QixZQUFaLEVBQVksQ0FxRGIsRUFsREN3RCxVQUFVakQsU0FBQUEsR0FxRFBzQixFQXBERm1CLE9BQUFBLFVBQVdoQixTQUFBLFVBb0RULEVBQ0hILEVBcERDUSxlQW9ERCxFQUNzQyxDQUFBLElBQTVCdEMsTUFBTThCLEVBQUVDLE9BQU9wQixJQUFJQyxLQUM3QjRDLFVBckRJekQsQ0FBQUEsRUFDUSxDQUFBLElBQVhrRCxNQUFXbkIsRUFBQUMsT0FBQXBCLElBQUFDLE9Bc0Raa0IsRUFyRENDLE9BQUFDLFVBQUFQLElBQUEsY0FxREQsRUFDQWMsUUFBTyxFQUVSLEVBR0RoRCxPQXZERW1FLGlCQUFtQi9DLFFBQUt5QyxVQXVEMUIsRUFDQTNELFNBdkRHd0QsUUFBVyxTQUFBWixHQUFBLE9BQUFBLEVBQUFxQixpQkFBQSxRQUFBQyxXQUFBLENBQUEsQ0F1RGQsRUFDQXZFLFVBdkRHc0UsaUJBQUEsY0FBQUUsT0F1REgsRUFDQXhFLFVBQVVzRSxpQkFBaUIsUUFBU0QsU0FBcEMsRUFFQXRCLFFBeERHYyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVQbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWJveF9fcGxhdGUnKTtcclxuY29uc3QgbmF2QmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xyXG5jb25zdCBnYW1lTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXJfX2xpc3QtZ2FtZScpO1xyXG5jb25zdCBuYXZJdGVtcyA9IGdhbWVMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZiYXJfX2xpc3RfX2l0ZW0nKTtcclxuY29uc3QgY291bnRlck1pbmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdW50ZXItbWluZXMnKTtcclxuXHJcbmNvbnN0IGJlZ2dpbmVyID0gWzgsIDgsIDEwXTtcclxuY29uc3QgaW50ZXJtZWRpYXRlID0gWzE2LCAxNiwgNDBdO1xyXG5jb25zdCBleHBlcnQgPSBbMzEsIDE2LCA5OV07XHJcblxyXG5sZXQgYm9tYnMgPSBbXTtcclxubGV0IGJveGVzID0gW107XHJcbmxldCBjaG9zZW5MZXZlbCA9IGJlZ2dpbmVyO1xyXG5cclxuY29uc3QgY291bnRCb3hlcyA9IGNob3NlbkxldmVsID0+IHtcclxuXHRyZXR1cm4gY2hvc2VuTGV2ZWxbMF0gKiBjaG9zZW5MZXZlbFsxXTtcclxufTtcclxuXHJcbmNvbnN0IHNodWZmbGUgPSAoYm94ZXNBbW91bnQsIGJvbWJzQW1vdW50KSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBib21ic0Ftb3VudDsgaSsrKSB7XHJcblx0XHRsZXQgcmFuZG9tTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYm94ZXNBbW91bnQpO1xyXG5cdFx0aWYgKHJhbmRvbU51bSA9PT0gMCB8fCBib21icy5pbmNsdWRlcyhyYW5kb21OdW0pKSB7XHJcblx0XHRcdGktLTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGJvbWJzLnB1c2gocmFuZG9tTnVtKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5jbGFzcyBHYW1lUGxhdGUge1xyXG5cdGNvbnN0cnVjdG9yKGlkLCBib21iKSB7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0XHR0aGlzLmJvbWIgPSBib21iO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgY3JlYXRlR2FtZVBsYXRlID0gYm94ZXNBbW91bnQgPT4ge1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgYm94ZXNBbW91bnQ7IGkrKykge1xyXG5cdFx0Ym94ZXNbaV0gPSBuZXcgR2FtZVBsYXRlKGksIGZhbHNlKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBwbGFudEJvbWJzID0gKCkgPT4ge1xyXG5cdGJveGVzLmZvckVhY2goYm94ID0+IHtcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhib3guaWQpKSB7XHJcblx0XHRcdGJveC5ib21iID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdHYW1lUGxhdGUgPSBib3hlc0Ftb3VudCA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBib3hlc0Ftb3VudDsgaSsrKSB7XHJcblx0XHRsZXQgZW1wdHlCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGVtcHR5Qm94LnNldEF0dHJpYnV0ZSgnaWQnLCBpKTtcclxuXHRcdGdhbWVQbGF0ZS5hcHBlbmQoZW1wdHlCb3gpO1xyXG5cdFx0ZW1wdHlCb3guY2xhc3NMaXN0LmFkZCgnZ2FtZS1ib3hfX3BsYXRlX19lbGVtZW50Jyk7XHJcblx0fVxyXG5cdGNvdW50ZXJNaW5lcy5pbm5lckhUTUwgPSBgMCR7Y2hvc2VuTGV2ZWxbMl19YDtcclxuXHQvLyB0dSBtb3plIGZvckVhY2hlbXB0eUJveFxyXG59O1xyXG5cclxuY29uc3QgY2xlYXJQbGF0ZSA9ICgpID0+IHtcclxuXHRnYW1lUGxhdGUuaW5uZXJIVE1MID0gJyc7XHJcblx0Ym9tYnMgPSBbXTtcclxuXHRib3hlcyA9IFtdO1xyXG59O1xyXG5cclxuY29uc3QgbmV3R2FtZSA9ICgpID0+IHtcclxuXHRjbGVhclBsYXRlKCk7XHJcblx0Y291bnRlck1pbmVzLmlubmVySFRNTCA9IGAwJHtjaG9zZW5MZXZlbFsyXX1gO1xyXG5cdHNodWZmbGUoY291bnRCb3hlcyhjaG9zZW5MZXZlbCksIGNob3NlbkxldmVsWzJdKTtcclxuXHRjcmVhdGVHYW1lUGxhdGUoY291bnRCb3hlcyhjaG9zZW5MZXZlbCkpO1xyXG5cdHBsYW50Qm9tYnMoKTtcclxuXHRkcmF3R2FtZVBsYXRlKGNvdW50Qm94ZXMoY2hvc2VuTGV2ZWwpKTtcclxufTtcclxuXHJcbmNvbnN0IGNob29zZUxldmVsID0gZSA9PiB7XHJcblx0Y2xlYXJQbGF0ZSgpO1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JlZ2dpbmVyJykpIHtcclxuXHRcdGNob3NlbkxldmVsID0gYmVnZ2luZXI7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtaW50ZXJtZWRpYXRlJyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtZXhwZXJ0Jyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LmFkZCgncGxhdGUtYmVnZ2luZXInKTtcclxuXHR9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW50ZXJtZWRpYXRlJykpIHtcclxuXHRcdGNob3NlbkxldmVsID0gaW50ZXJtZWRpYXRlO1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXRlLWJlZ2dpbmVyJyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtZXhwZXJ0Jyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LmFkZCgncGxhdGUtaW50ZXJtZWRpYXRlJyk7XHJcblx0fSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGVydCcpKSB7XHJcblx0XHRjaG9zZW5MZXZlbCA9IGV4cGVydDtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdwbGF0ZS1iZWdnaW5lcicpO1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXRlLWludGVybWVkaWF0ZScpO1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5hZGQoJ3BsYXRlLWV4cGVydCcpO1xyXG5cdH1cclxuXHRuYXZJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QudG9nZ2xlKCduYXZiYXJfX2xpc3QtZ2FtZV9faXRlbScpKTtcclxuXHJcblx0bmV3R2FtZSgpO1xyXG59O1xyXG5cclxuY29uc3QgdW5mb2xkTWVudSA9IGUgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdmJhcl9fbGlzdC1nYW1lJykpIHtcclxuXHRcdG5hdkl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ25hdmJhcl9fbGlzdC1nYW1lX19pdGVtJykpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHB1dEZsYWcgPSBlID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0ZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgncHV0LWZsYWcnKTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dBbGwgPSAoKSA9PiB7XHJcblx0Y29uc3QgcGxhdGVFbGVtZW50cyA9IGdhbWVQbGF0ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdnYW1lLWJveF9fcGxhdGVfX2VsZW1lbnQnKTtcclxuXHJcblx0Zm9yIChjb25zdCBib3ggb2YgYm94ZXMpIHtcclxuXHRcdGlmIChib3guYm9tYiA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRpZiAoIXBsYXRlRWxlbWVudHNbYm94LmlkXS5jbGFzc0xpc3QuY29udGFpbnMoJ3B1dC1mbGFnJykpIHtcclxuXHRcdFx0XHRwbGF0ZUVsZW1lbnRzW2JveC5pZF0uY2xhc3NMaXN0LmFkZCgnc2hvdy1ib21iJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChib3guYm9tYiA9PT0gZmFsc2UpIHtcclxuXHRcdFx0aWYgKHBsYXRlRWxlbWVudHNbYm94LmlkXS5jbGFzc0xpc3QuY29udGFpbnMoJ3B1dC1mbGFnJykpIHtcclxuXHRcdFx0XHRwbGF0ZUVsZW1lbnRzW2JveC5pZF0uY2xhc3NMaXN0LmFkZCgnd3JvbmctYmV0Jyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5sZXQgYm9tYnNOdW1iZXIgPSAwO1xyXG5cclxuY29uc3QgY2hlY2tCb21iQXJvdW5kID0gKGUsIHJvd0xlbmd0aCkgPT4ge1xyXG5cdGxldCBpZCA9IE51bWJlci5wYXJzZUZsb2F0KGUudGFyZ2V0LmlkKTtcclxuXHRpZiAoaWQgPT09IDApIHtcclxuXHRcdC8vIHRvcC1sZWZ0IGNvcm5lciBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIChyb3dMZW5ndGggKyAxKSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGlkID09PSByb3dMZW5ndGggLSAxKSB7XHJcblx0XHQvLyB0b3AtcmlnaHQgY29ybmVyIGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgKHJvd0xlbmd0aCAtIDEpKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaWQgPT09IHJvd0xlbmd0aCAqIHJvd0xlbmd0aCAtIHJvd0xlbmd0aCkge1xyXG5cdFx0Ly8gYm90dG9tLWxlZnQgY29ybmVyIGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkIC0gKHJvd0xlbmd0aCAtIDEpKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaWQgPT09IHJvd0xlbmd0aCAqIHJvd0xlbmd0aCAtIDEpIHtcclxuXHRcdC8vIGJvdHRvbS1yaWdodCBjb3JuZXIgY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSAocm93TGVuZ3RoICsgMSkpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChpZCAlIHJvd0xlbmd0aCA9PT0gMCkge1xyXG5cdFx0Ly8gc2lkZSBsZWZ0IGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIHJvd0xlbmd0aCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmICgoaWQgKyAxKSAlIHJvd0xlbmd0aCA9PT0gMCkge1xyXG5cdFx0Ly8gc2lkZSByaWdodCBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkIC0gcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgKyByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgKyByb3dMZW5ndGggLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaWQgLSByb3dMZW5ndGggPCAwKSB7XHJcblx0XHQvLyBzaWRlIHRvcCBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgKyByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKCdwb2theiBtbmllIHRvJyk7XHJcblx0fSBlbHNlIGlmIChpZCA+IHJvd0xlbmd0aCAqIHJvd0xlbmd0aCAtIHJvd0xlbmd0aCkge1xyXG5cdFx0Ly8gc2lkZSBib3R0b20gY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkIC0gcm93TGVuZ3RoICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCAtIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCAtIHJvd0xlbmd0aCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIHRoZSByZXN0IG9mIGJveGVzXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCAtIHJvd0xlbmd0aCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaWQgLSByb3dMZW5ndGggLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGlkICsgcm93TGVuZ3RoICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpZCArIHJvd0xlbmd0aCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRlLnRhcmdldC5pbm5lckhUTUwgPSBib21ic051bWJlcjtcclxuXHRib21ic051bWJlciA9IDA7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RW1wdHkgPSBlID0+IHtcclxuXHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LWVtcHR5Jyk7XHJcblx0Y2hlY2tCb21iQXJvdW5kKGUsIGNob3NlbkxldmVsWzBdKTtcclxufTtcclxuXHJcbmNvbnN0IGxlZnRDbGljayA9IGUgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3B1dC1mbGFnJykpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2UudGFyZ2V0LmlkXS5ib21iID09PSBmYWxzZSkge1xyXG5cdFx0c2hvd0VtcHR5KGUpO1xyXG5cdH0gZWxzZSBpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWIgPT09IHRydWUpIHtcclxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Nob3ctdHJpZ2dlcicpO1xyXG5cdFx0c2hvd0FsbCgpO1xyXG5cdH1cclxufTtcclxuXHJcbi8vICBMaXN0ZW5lcnNcclxubmF2QmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5mb2xkTWVudSk7XHJcbm5hdkl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hvb3NlTGV2ZWwpKTtcclxuZ2FtZVBsYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHV0RmxhZyk7XHJcbmdhbWVQbGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxlZnRDbGljayk7XHJcblxyXG5uZXdHYW1lKCk7XHJcbiJdfQ==
