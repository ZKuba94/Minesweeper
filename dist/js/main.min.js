"use strict";function _createForOfIteratorHelper(e,s){var t,o,n,a,m="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(m)return o=!(t=!0),{s:function(){m=m.call(e)},n:function(){var e=m.next();return t=e.done,e},e:function(e){o=!0,n=e},f:function(){try{t||null==m.return||m.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(m=_unsupportedIterableToArray(e))||s&&e&&"number"==typeof e.length)return m&&(e=m),a=0,{s:s=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,s){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,s):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,s):void 0}function _arrayLikeToArray(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,o=new Array(s);t<s;t++)o[t]=e[t];return o}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var o=s[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var gamePlate=document.querySelector(".game-box__plate"),navBar=document.querySelector(".navbar"),gameList=document.querySelector(".navbar__list-game"),navItems=gameList.querySelectorAll(".navbar__list__item"),counterMines=document.querySelector(".counter-mines"),plateElements=gamePlate.getElementsByClassName("game-box__plate__element"),begginer=[8,8,10],intermediate=[16,16,40],expert=[31,16,99],bombsNumber=0,bombs=[],boxes=[],chosenLevel=begginer,countBoxes=function(e){return e[0]*e[1]},shuffle=function(e,s){for(var t=0;t<s;t++){var o=Math.floor(Math.random()*e);0===o||bombs.includes(o)?t--:bombs.push(o)}},GamePlate=_createClass(function e(s,t,o){_classCallCheck(this,e),this.id=s,this.bomb=t,this.bombsAround=o}),createGamePlate=function(e){for(var s=0;s<e;s++)checkBombAround(s,chosenLevel[0]),boxes[s]=new GamePlate(s,!1,bombsNumber),bombsNumber=0},plantBombs=function(){boxes.forEach(function(e){bombs.includes(e.id)&&(e.bomb=!0)})},drawGamePlate=function(e){for(var s=0;s<e;s++){var t=document.createElement("div");t.setAttribute("id",s),gamePlate.append(t),t.classList.add("game-box__plate__element")}counterMines.innerHTML="0".concat(chosenLevel[2])},clearPlate=function(){gamePlate.innerHTML="",bombs=[],boxes=[]},newGame=function(){clearPlate(),counterMines.innerHTML="0".concat(chosenLevel[2]),shuffle(countBoxes(chosenLevel),chosenLevel[2]),createGamePlate(countBoxes(chosenLevel)),plantBombs(),drawGamePlate(countBoxes(chosenLevel))},chooseLevel=function(e){clearPlate(),e.target.classList.contains("begginer")?(chosenLevel=begginer,gamePlate.classList.remove("plate-intermediate"),gamePlate.classList.remove("plate-expert"),gamePlate.classList.add("plate-begginer")):e.target.classList.contains("intermediate")?(chosenLevel=intermediate,gamePlate.classList.remove("plate-begginer"),gamePlate.classList.remove("plate-expert"),gamePlate.classList.add("plate-intermediate")):e.target.classList.contains("expert")&&(chosenLevel=expert,gamePlate.classList.remove("plate-begginer"),gamePlate.classList.remove("plate-intermediate"),gamePlate.classList.add("plate-expert")),navItems.forEach(function(e){return e.classList.toggle("navbar__list-game__item")}),newGame()},unfoldMenu=function(e){e.target.classList.contains("navbar__list-game")&&navItems.forEach(function(e){return e.classList.toggle("navbar__list-game__item")})},putFlag=function(e){e.preventDefault(),e.target.classList.toggle("put-flag")},showAll=function(){var e,s=gamePlate.getElementsByClassName("game-box__plate__element"),t=_createForOfIteratorHelper(boxes);try{for(t.s();!(e=t.n()).done;){var o=e.value;!0!==o.bomb||s[o.id].classList.contains("put-flag")||s[o.id].classList.add("show-bomb"),!1===o.bomb&&s[o.id].classList.contains("put-flag")&&s[o.id].classList.add("wrong-bet")}}catch(e){t.e(e)}finally{t.f()}},checkBombAround=function(e,s){0===e?(bombs.includes(e+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+(s+1))&&bombsNumber++):e===s-1?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+(s-1))&&bombsNumber++):e===s*s-s?(bombs.includes(e+1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-(s-1))&&bombsNumber++):e===s*s-1?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-(s+1))&&bombsNumber++):e%s==0?(bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s+1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s+1)&&bombsNumber++):(e+1)%s==0?(bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s-1)&&bombsNumber++,bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s-1)&&bombsNumber++):e-s<0?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e+s+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s-1)&&bombsNumber++):s*s-s<e?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e-s+1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s-1)&&bombsNumber++):(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e-s+1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s-1)&&bombsNumber++,bombs.includes(e+s+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s-1)&&bombsNumber++)},showEmptyForZeroBombs=function(e,s){console.log(e),0===e?(plateElements[e+1].classList.contains("show-empty")||showEmpty(e+1,s),plateElements[e+1+s].classList.contains("show-empty")||showEmpty(e+1+s,s),plateElements[e+s].classList.contains("show-empty")||showEmpty(e+s,s)):e===s-1?(plateElements[e-1].classList.contains("show-empty")||showEmpty(e-1,s),plateElements[e-1+s].classList.contains("show-empty")||showEmpty(e-1+s,s),plateElements[e+s].classList.contains("show-empty")||showEmpty(e+s,s)):e===s*s-s?(plateElements[e+1].classList.contains("show-empty")||showEmpty(e+1,s),plateElements[e-s].classList.contains("show-empty")||showEmpty(e-s,s),plateElements[e-1-s].classList.contains("show-empty")||showEmpty(e-1-s,s)):e===s*s-1?(plateElements[e-1].classList.contains("show-empty")||showEmpty(e-1,s),plateElements[e-s].classList.contains("show-empty")||showEmpty(e-s,s),plateElements[e-1-s].classList.contains("show-empty")||showEmpty(e-1-s,s)):e%s==0?(plateElements[e-s].classList.contains("show-empty")||showEmpty(e-s,s),plateElements[e+1-s].classList.contains("show-empty")||showEmpty(e+1-s,s),plateElements[e+1].classList.contains("show-empty")||showEmpty(e+1,s),plateElements[e+s].classList.contains("show-empty")||showEmpty(e+s,s),plateElements[e+1+s].classList.contains("show-empty")||showEmpty(e+1+s,s)):(e+1)%s==0?(plateElements[e-s].classList.contains("show-empty")||showEmpty(e-s,s),plateElements[e-s-1].classList.contains("show-empty")||showEmpty(e-s-1,s),plateElements[e-1].classList.contains("show-empty")||showEmpty(e-1,s),plateElements[e+s].classList.contains("show-empty")||showEmpty(e+s,s),plateElements[e+s-1].classList.contains("show-empty")||showEmpty(e+s-1,s)):e-s<0?(plateElements[e-1].classList.contains("show-empty")||showEmpty(e-1,s),plateElements[e+1].classList.contains("show-empty")||showEmpty(e+1,s),plateElements[e+s+1].classList.contains("show-empty")||showEmpty(e+s+1,s),plateElements[e+s].classList.contains("show-empty")||showEmpty(e+s,s),plateElements[e+s-1].classList.contains("show-empty")||showEmpty(e+s-1,s)):s*s-s<e?(plateElements[e-1].classList.contains("show-empty")||showEmpty(e-1,s),plateElements[e+1].classList.contains("show-empty")||showEmpty(e+1,s),plateElements[e-s+1].classList.contains("show-empty")||showEmpty(e-s+1,s),plateElements[e-s].classList.contains("show-empty")||showEmpty(e-s,s),plateElements[e-s-1].classList.contains("show-empty")||showEmpty(e-s-1,s)):(plateElements[e-1].classList.contains("show-empty")||showEmpty(e-1,s),plateElements[e+1].classList.contains("show-empty")||showEmpty(e+1,s),plateElements[e-s+1].classList.contains("show-empty")||showEmpty(e-s+1,s),plateElements[e-s].classList.contains("show-empty")||showEmpty(e-s,s),plateElements[e-s-1].classList.contains("show-empty")||showEmpty(e-s-1,s),plateElements[e+s-1].classList.contains("show-empty")||showEmpty(e+s-1,s),plateElements[e+s].classList.contains("show-empty")||showEmpty(e+s,s),plateElements[e+s+1].classList.contains("show-empty")||showEmpty(e+s+1,s))},showEmpty=function(e,s){e=Number.parseFloat(e);0===boxes[e].bombsAround?(plateElements[e].classList.add("show-empty"),showEmptyForZeroBombs(e,s)):1===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-1")):2===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-2")):3===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-3")):4===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-4")):5===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-5")):6===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-6")):7===boxes[e].bombsAround?(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-7")):8===boxes[e].bombsAround&&(plateElements[e].classList.add("show-number"),plateElements[e].classList.add("show-number-8"))},leftClick=function(e){e.target.classList.contains("put-flag")?e.preventDefault():!1===boxes[e.target.id].bomb?showEmpty(e.target.id,chosenLevel[0]):!0===boxes[e.target.id].bomb&&(e.target.classList.add("show-trigger"),showAll())};navBar.addEventListener("click",unfoldMenu),navItems.forEach(function(e){return e.addEventListener("click",chooseLevel)}),gamePlate.addEventListener("contextmenu",putFlag),gamePlate.addEventListener("click",leftClick),newGame();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZ2FtZVBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmF2QmFyIiwiZ2FtZUxpc3QiLCJuYXZJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudGVyTWluZXMiLCJwbGF0ZUVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImJlZ2dpbmVyIiwiaW50ZXJtZWRpYXRlIiwiZXhwZXJ0IiwiYm9tYnNOdW1iZXIiLCJib21icyIsImJveGVzQW1vdW50IiwiYm9tYnNBbW91bnQiLCJpIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaW5jbHVkZXMiLCJyYW5kb21OdW0iLCJib3hlcyIsInB1c2giLCJzaHVmZmxlIiwiR2FtZVBsYXRlIiwiaWQiLCJib21iIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImJvbWJzQXJvdW5kIiwiY3JlYXRlR2FtZVBsYXRlIiwiY2hlY2tCb21iQXJvdW5kIiwiY2hvc2VuTGV2ZWwiLCJwbGFudEJvbWJzIiwiYm94IiwiZW1wdHlCb3giLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsImFkZCIsImlubmVySFRNTCIsImNvbmNhdCIsImNsZWFyUGxhdGUiLCJkcmF3R2FtZVBsYXRlIiwiY2xhc3NMaXN0IiwiY291bnRCb3hlcyIsImUiLCJ0YXJnZXQiLCJjb250YWlucyIsInJlbW92ZSIsImNob29zZUxldmVsIiwidG9nZ2xlIiwibmV3R2FtZSIsInByZXZlbnREZWZhdWx0Iiwic2hvd0FsbCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsInVuZm9sZE1lbnUiLCJlcnIiLCJmIiwicm93TGVuZ3RoIiwic2hvd0VtcHR5Rm9yWmVyb0JvbWJzIiwiY29uc29sZSIsInNob3dFbXB0eSIsImxvZyIsIk51bWJlciIsInBhcnNlRmxvYXQiLCJsZWZ0Q2xpY2si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UyxHQUFDNkIsVUFBTXFCLElBQWpCLGVBNkVELEdBNUVDLElBQUE1QyxNQUFBTixHQUFBYyxhQThFRHZCLGNBQWNTLEdBQUc2QixVQUFVTCxJQUFJLGFBQS9CLEVBQ0FqQyxjQTlFS0EsR0FBQUEsVUFBa0IyRCxJQUFBQSxlQThFdkIsR0E3RThCQSxJQUE3QkcsTUFBV3JELEdBQUdrRCxhQStFZjNELGNBOUVDUyxHQUFBNkIsVUFBQUwsSUFBQSxhQThFRCxFQUNBakMsY0FBY1MsR0FBRzZCLFVBQVVMLElBQUksZUFBL0IsR0E5RUssSUFBQWpDLE1BQUFBLEdBQUFBLGNBZ0ZMQSxjQS9FV1MsR0FBQzZCLFVBQUZMLElBQWdCMEIsYUErRTFCLEVBQ0EzRCxjQS9FQ1MsR0FBQTZCLFVBQUFMLElBQUEsZUErRUQsRUFHRCxFQTlGT2lDLFVBZ0JRUCxTQUFBQSxHQUNkbkIsRUFBQUMsT0FBS3pDLFVBQWUwQyxTQUFNSixVQUExQixFQWlGQUUsRUFBRU8sZUFBRixFQS9FQyxDQUFBLElBQUFoQyxNQUFBeUIsRUFBQUMsT0FBQXRCLElBQUFDLEtBaUZEMEMsVUFBVXRCLEVBQUVDLE9BQU90QixHQUFJTyxZQUFZLEVBQTFCLEVBaEYyQmdCLENBQUFBLElBQS9CMUMsTUFBQUEsRUFBQUEsT0FBa0JtQixJQUFHbUIsT0FrRjFCRSxFQUFFQyxPQWpGRHFCLFVBQVM3QixJQUFRMEIsY0FpRmxCLEVBQ0FYLFFBakZDLEVBbUZGLEVBR0RyRCxPQUFPd0UsaUJBQWlCLFFBQVNYLFVBQWpDLEVBQ0EzRCxTQW5GT0csUUFBQUEsU0FBQUEsR0FBQUEsT0FBZW9FLEVBQUdULGlCQUFsQixRQUFBZixXQUFlLENBQWY1QyxDQW1GUCxFQUNBUixVQW5GR3NFLGlCQUFjSCxjQUFkVSxPQW1GSCxFQUNBN0UsVUFuRkcyRSxpQkFBQSxRQUFBRCxTQW1GSCxFQUVBcEIsUUFwRkUiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lUGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1ib3hfX3BsYXRlJyk7XHJcbmNvbnN0IG5hdkJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKTtcclxuY29uc3QgZ2FtZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyX19saXN0LWdhbWUnKTtcclxuY29uc3QgbmF2SXRlbXMgPSBnYW1lTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2YmFyX19saXN0X19pdGVtJyk7XHJcbmNvbnN0IGNvdW50ZXJNaW5lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb3VudGVyLW1pbmVzJyk7XHJcblxyXG5jb25zdCBwbGF0ZUVsZW1lbnRzID0gZ2FtZVBsYXRlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dhbWUtYm94X19wbGF0ZV9fZWxlbWVudCcpO1xyXG5cclxuY29uc3QgYmVnZ2luZXIgPSBbOCwgOCwgMTBdO1xyXG5jb25zdCBpbnRlcm1lZGlhdGUgPSBbMTYsIDE2LCA0MF07XHJcbmNvbnN0IGV4cGVydCA9IFszMSwgMTYsIDk5XTtcclxuXHJcbmxldCBib21ic051bWJlciA9IDA7XHJcbmxldCBib21icyA9IFtdO1xyXG5sZXQgYm94ZXMgPSBbXTtcclxubGV0IGNob3NlbkxldmVsID0gYmVnZ2luZXI7XHJcblxyXG5jb25zdCBjb3VudEJveGVzID0gY2hvc2VuTGV2ZWwgPT4ge1xyXG5cdHJldHVybiBjaG9zZW5MZXZlbFswXSAqIGNob3NlbkxldmVsWzFdO1xyXG59O1xyXG5cclxuY29uc3Qgc2h1ZmZsZSA9IChib3hlc0Ftb3VudCwgYm9tYnNBbW91bnQpID0+IHtcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGJvbWJzQW1vdW50OyBpKyspIHtcclxuXHRcdGxldCByYW5kb21OdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib3hlc0Ftb3VudCk7XHJcblx0XHRpZiAocmFuZG9tTnVtID09PSAwIHx8IGJvbWJzLmluY2x1ZGVzKHJhbmRvbU51bSkpIHtcclxuXHRcdFx0aS0tO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ym9tYnMucHVzaChyYW5kb21OdW0pO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmNsYXNzIEdhbWVQbGF0ZSB7XHJcblx0Y29uc3RydWN0b3IoaWQsIGJvbWIsIGJvbWJzQXJvdW5kKSB7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0XHR0aGlzLmJvbWIgPSBib21iO1xyXG5cdFx0dGhpcy5ib21ic0Fyb3VuZCA9IGJvbWJzQXJvdW5kO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgY3JlYXRlR2FtZVBsYXRlID0gYm94ZXNBbW91bnQgPT4ge1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgYm94ZXNBbW91bnQ7IGkrKykge1xyXG5cdFx0Y2hlY2tCb21iQXJvdW5kKGksIGNob3NlbkxldmVsWzBdKTtcclxuXHRcdGJveGVzW2ldID0gbmV3IEdhbWVQbGF0ZShpLCBmYWxzZSwgYm9tYnNOdW1iZXIpO1xyXG5cdFx0Ym9tYnNOdW1iZXIgPSAwO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHBsYW50Qm9tYnMgPSAoKSA9PiB7XHJcblx0Ym94ZXMuZm9yRWFjaChib3ggPT4ge1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGJveC5pZCkpIHtcclxuXHRcdFx0Ym94LmJvbWIgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgZHJhd0dhbWVQbGF0ZSA9IGJveGVzQW1vdW50ID0+IHtcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGJveGVzQW1vdW50OyBpKyspIHtcclxuXHRcdGxldCBlbXB0eUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0ZW1wdHlCb3guc2V0QXR0cmlidXRlKCdpZCcsIGkpO1xyXG5cdFx0Z2FtZVBsYXRlLmFwcGVuZChlbXB0eUJveCk7XHJcblx0XHRlbXB0eUJveC5jbGFzc0xpc3QuYWRkKCdnYW1lLWJveF9fcGxhdGVfX2VsZW1lbnQnKTtcclxuXHR9XHJcblx0Y291bnRlck1pbmVzLmlubmVySFRNTCA9IGAwJHtjaG9zZW5MZXZlbFsyXX1gO1xyXG5cdC8vIHR1IG1vemUgZm9yRWFjaGVtcHR5Qm94XHJcbn07XHJcblxyXG5jb25zdCBjbGVhclBsYXRlID0gKCkgPT4ge1xyXG5cdGdhbWVQbGF0ZS5pbm5lckhUTUwgPSAnJztcclxuXHRib21icyA9IFtdO1xyXG5cdGJveGVzID0gW107XHJcbn07XHJcblxyXG5jb25zdCBuZXdHYW1lID0gKCkgPT4ge1xyXG5cdGNsZWFyUGxhdGUoKTtcclxuXHRjb3VudGVyTWluZXMuaW5uZXJIVE1MID0gYDAke2Nob3NlbkxldmVsWzJdfWA7XHJcblx0c2h1ZmZsZShjb3VudEJveGVzKGNob3NlbkxldmVsKSwgY2hvc2VuTGV2ZWxbMl0pO1xyXG5cdGNyZWF0ZUdhbWVQbGF0ZShjb3VudEJveGVzKGNob3NlbkxldmVsKSk7XHJcblx0cGxhbnRCb21icygpO1xyXG5cdGRyYXdHYW1lUGxhdGUoY291bnRCb3hlcyhjaG9zZW5MZXZlbCkpO1xyXG59O1xyXG5cclxuY29uc3QgY2hvb3NlTGV2ZWwgPSBlID0+IHtcclxuXHRjbGVhclBsYXRlKCk7XHJcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmVnZ2luZXInKSkge1xyXG5cdFx0Y2hvc2VuTGV2ZWwgPSBiZWdnaW5lcjtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdwbGF0ZS1pbnRlcm1lZGlhdGUnKTtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdwbGF0ZS1leHBlcnQnKTtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QuYWRkKCdwbGF0ZS1iZWdnaW5lcicpO1xyXG5cdH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnRlcm1lZGlhdGUnKSkge1xyXG5cdFx0Y2hvc2VuTGV2ZWwgPSBpbnRlcm1lZGlhdGU7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtYmVnZ2luZXInKTtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdwbGF0ZS1leHBlcnQnKTtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QuYWRkKCdwbGF0ZS1pbnRlcm1lZGlhdGUnKTtcclxuXHR9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZXhwZXJ0JykpIHtcclxuXHRcdGNob3NlbkxldmVsID0gZXhwZXJ0O1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXRlLWJlZ2dpbmVyJyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtaW50ZXJtZWRpYXRlJyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LmFkZCgncGxhdGUtZXhwZXJ0Jyk7XHJcblx0fVxyXG5cdG5hdkl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ25hdmJhcl9fbGlzdC1nYW1lX19pdGVtJykpO1xyXG5cclxuXHRuZXdHYW1lKCk7XHJcbn07XHJcblxyXG5jb25zdCB1bmZvbGRNZW51ID0gZSA9PiB7XHJcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbmF2YmFyX19saXN0LWdhbWUnKSkge1xyXG5cdFx0bmF2SXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnbmF2YmFyX19saXN0LWdhbWVfX2l0ZW0nKSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgcHV0RmxhZyA9IGUgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRlLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdwdXQtZmxhZycpO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0FsbCA9ICgpID0+IHtcclxuXHRjb25zdCBwbGF0ZUVsZW1lbnRzID0gZ2FtZVBsYXRlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dhbWUtYm94X19wbGF0ZV9fZWxlbWVudCcpO1xyXG5cclxuXHRmb3IgKGNvbnN0IGJveCBvZiBib3hlcykge1xyXG5cdFx0aWYgKGJveC5ib21iID09PSB0cnVlKSB7XHJcblx0XHRcdGlmICghcGxhdGVFbGVtZW50c1tib3guaWRdLmNsYXNzTGlzdC5jb250YWlucygncHV0LWZsYWcnKSkge1xyXG5cdFx0XHRcdHBsYXRlRWxlbWVudHNbYm94LmlkXS5jbGFzc0xpc3QuYWRkKCdzaG93LWJvbWInKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKGJveC5ib21iID09PSBmYWxzZSkge1xyXG5cdFx0XHRpZiAocGxhdGVFbGVtZW50c1tib3guaWRdLmNsYXNzTGlzdC5jb250YWlucygncHV0LWZsYWcnKSkge1xyXG5cdFx0XHRcdHBsYXRlRWxlbWVudHNbYm94LmlkXS5jbGFzc0xpc3QuYWRkKCd3cm9uZy1iZXQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrQm9tYkFyb3VuZCA9IChpLCByb3dMZW5ndGgpID0+IHtcclxuXHQvLyBsZXQgaWQgPSBOdW1iZXIucGFyc2VGbG9hdChlLnRhcmdldC5pZCk7XHJcblx0Ly8gY29uc3QgcGxhdGVFbGVtZW50cyA9IGdhbWVQbGF0ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdnYW1lLWJveF9fcGxhdGVfX2VsZW1lbnQnKTtcclxuXHJcblx0aWYgKGkgPT09IDApIHtcclxuXHRcdC8vIHRvcC1sZWZ0IGNvcm5lciBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIChyb3dMZW5ndGggKyAxKSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgPT09IHJvd0xlbmd0aCAtIDEpIHtcclxuXHRcdC8vIHRvcC1yaWdodCBjb3JuZXIgY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAocm93TGVuZ3RoIC0gMSkpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChpID09PSByb3dMZW5ndGggKiByb3dMZW5ndGggLSByb3dMZW5ndGgpIHtcclxuXHRcdC8vIGJvdHRvbS1sZWZ0IGNvcm5lciBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIChyb3dMZW5ndGggLSAxKSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgPT09IHJvd0xlbmd0aCAqIHJvd0xlbmd0aCAtIDEpIHtcclxuXHRcdC8vIGJvdHRvbS1yaWdodCBjb3JuZXIgY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSAocm93TGVuZ3RoICsgMSkpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChpICUgcm93TGVuZ3RoID09PSAwKSB7XHJcblx0XHQvLyBzaWRlIGxlZnQgY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmICgoaSArIDEpICUgcm93TGVuZ3RoID09PSAwKSB7XHJcblx0XHQvLyBzaWRlIHJpZ2h0IGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGggLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaSAtIHJvd0xlbmd0aCA8IDApIHtcclxuXHRcdC8vIHNpZGUgdG9wIGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgPiByb3dMZW5ndGggKiByb3dMZW5ndGggLSByb3dMZW5ndGgpIHtcclxuXHRcdC8vIHNpZGUgYm90dG9tIGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gdGhlIHJlc3Qgb2YgYm94ZXNcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGggLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHQvLyBpZiAoYm9tYnNOdW1iZXIgPT09IDApIHtcclxuXHRcdC8vIFx0cGxhdGVFbGVtZW50c1tpZF0uY2xhc3NMaXN0LmFkZChgc2hvdy1udW1iZXJgKTtcclxuXHRcdC8vIFx0cGxhdGVFbGVtZW50c1tpZCAtIDFdLmNsYXNzTGlzdC5hZGQoYHNob3ctbnVtYmVyYCk7XHJcblx0XHQvLyBcdHBsYXRlRWxlbWVudHNbaWQgKyAxXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkIC0gcm93TGVuZ3RoICsgMV0uY2xhc3NMaXN0LmFkZChgc2hvdy1udW1iZXJgKTtcclxuXHRcdC8vIFx0cGxhdGVFbGVtZW50c1tpZCAtIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmFkZChgc2hvdy1udW1iZXJgKTtcclxuXHRcdC8vIFx0cGxhdGVFbGVtZW50c1tpZCAtIHJvd0xlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoYHNob3ctbnVtYmVyYCk7XHJcblx0XHQvLyBcdHBsYXRlRWxlbWVudHNbaWQgKyByb3dMZW5ndGggKyAxXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkICsgcm93TGVuZ3RoXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkICsgcm93TGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmFkZChgc2hvdy1udW1iZXJgKTtcclxuXHRcdC8vIH1cclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzaG93RW1wdHlGb3JaZXJvQm9tYnMgPSAoaSwgcm93TGVuZ3RoKSA9PiB7XHJcblx0Y29uc29sZS5sb2coaSk7XHJcblx0aWYgKGkgPT09IDApIHtcclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpICsgMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyAxICsgcm93TGVuZ3RoXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSArIDEgKyByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChpID09PSByb3dMZW5ndGggLSAxKSB7XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpIC0gMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gMSArIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSAxICsgcm93TGVuZ3RoLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyByb3dMZW5ndGhdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpICsgcm93TGVuZ3RoLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaSA9PT0gcm93TGVuZ3RoICogcm93TGVuZ3RoIC0gcm93TGVuZ3RoKSB7XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpICsgMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gcm93TGVuZ3RoXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIHJvd0xlbmd0aCwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gMSAtIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSAxIC0gcm93TGVuZ3RoLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaSA9PT0gcm93TGVuZ3RoICogcm93TGVuZ3RoIC0gMSkge1xyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgLSAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIDEgLSByb3dMZW5ndGhdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpIC0gMSAtIHJvd0xlbmd0aCwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgJSByb3dMZW5ndGggPT09IDApIHtcclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gcm93TGVuZ3RoXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIHJvd0xlbmd0aCwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpICsgMSAtIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyAxIC0gcm93TGVuZ3RoLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSArIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIDEgKyByb3dMZW5ndGhdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpICsgMSArIHJvd0xlbmd0aCwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKChpICsgMSkgJSByb3dMZW5ndGggPT09IDApIHtcclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gcm93TGVuZ3RoXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIHJvd0xlbmd0aCwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gcm93TGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSByb3dMZW5ndGggLSAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgLSAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIHJvd0xlbmd0aCAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpICsgcm93TGVuZ3RoIC0gMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgLSByb3dMZW5ndGggPCAwKSB7XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpIC0gMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpICsgMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyByb3dMZW5ndGggKyAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSArIHJvd0xlbmd0aCArIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSArIHJvd0xlbmd0aCAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpICsgcm93TGVuZ3RoIC0gMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgPiByb3dMZW5ndGggKiByb3dMZW5ndGggLSByb3dMZW5ndGgpIHtcclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSArIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIHJvd0xlbmd0aCArIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpIC0gcm93TGVuZ3RoICsgMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gcm93TGVuZ3RoXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIHJvd0xlbmd0aCwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpIC0gcm93TGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSByb3dMZW5ndGggLSAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpIC0gMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpICsgMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgLSByb3dMZW5ndGggKyAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSAtIHJvd0xlbmd0aCArIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIHJvd0xlbmd0aF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgLSByb3dMZW5ndGgsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXBsYXRlRWxlbWVudHNbaSAtIHJvd0xlbmd0aCAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpIC0gcm93TGVuZ3RoIC0gMSwgcm93TGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGlmICghcGxhdGVFbGVtZW50c1tpICsgcm93TGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93LWVtcHR5JykpIHtcclxuXHRcdFx0c2hvd0VtcHR5KGkgKyByb3dMZW5ndGggLSAxLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyByb3dMZW5ndGhdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1lbXB0eScpKSB7XHJcblx0XHRcdHNob3dFbXB0eShpICsgcm93TGVuZ3RoLCByb3dMZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFwbGF0ZUVsZW1lbnRzW2kgKyByb3dMZW5ndGggKyAxXS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZW1wdHknKSkge1xyXG5cdFx0XHRzaG93RW1wdHkoaSArIHJvd0xlbmd0aCArIDEsIHJvd0xlbmd0aCk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2hvd0VtcHR5ID0gKGUsIHJvd0xlbmd0aCkgPT4ge1xyXG5cdC8vIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Nob3ctZW1wdHknKTtcclxuXHQvLyBjaGVja0JvbWJBcm91bmQoZSwgY2hvc2VuTGV2ZWxbMF0pO1xyXG5cdGxldCBpID0gTnVtYmVyLnBhcnNlRmxvYXQoZSk7XHJcblx0aWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSAwKSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctZW1wdHknKTtcclxuXHRcdC8vIGNoZWNrQm9tYkFyb3VuZChlLCBjaG9zZW5MZXZlbFswXSk7XHJcblx0XHRzaG93RW1wdHlGb3JaZXJvQm9tYnMoaSwgcm93TGVuZ3RoKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSAxKSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTEnKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSAyKSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTInKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSAzKSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTMnKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSA0KSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTQnKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSA1KSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTUnKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSA2KSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTYnKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSA3KSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTcnKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2ldLmJvbWJzQXJvdW5kID09PSA4KSB7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyJyk7XHJcblx0XHRwbGF0ZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3Nob3ctbnVtYmVyLTgnKTtcclxuXHR9XHJcblx0cmV0dXJuO1xyXG59O1xyXG5cclxuY29uc3QgbGVmdENsaWNrID0gZSA9PiB7XHJcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHV0LWZsYWcnKSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH0gZWxzZSBpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWIgPT09IGZhbHNlKSB7XHJcblx0XHRzaG93RW1wdHkoZS50YXJnZXQuaWQsIGNob3NlbkxldmVsWzBdKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2UudGFyZ2V0LmlkXS5ib21iID09PSB0cnVlKSB7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LXRyaWdnZXInKTtcclxuXHRcdHNob3dBbGwoKTtcclxuXHR9XHJcbn07XHJcblxyXG4vLyAgTGlzdGVuZXJzXHJcbm5hdkJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVuZm9sZE1lbnUpO1xyXG5uYXZJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNob29zZUxldmVsKSk7XHJcbmdhbWVQbGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHB1dEZsYWcpO1xyXG5nYW1lUGxhdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsZWZ0Q2xpY2spO1xyXG5cclxubmV3R2FtZSgpO1xyXG4iXX0=
