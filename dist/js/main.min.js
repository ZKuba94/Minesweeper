"use strict";function _createForOfIteratorHelper(e,s){var t,o,a,b,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return o=!(t=!0),{s:function(){r=r.call(e)},n:function(){var e=r.next();return t=e.done,e},e:function(e){o=!0,a=e},f:function(){try{t||null==r.return||r.return()}finally{if(o)throw a}}};if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||s&&e&&"number"==typeof e.length)return r&&(e=r),b=0,{s:s=function(){},n:function(){return b>=e.length?{done:!0}:{done:!1,value:e[b++]}},e:function(e){throw e},f:s};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,s){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,s):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,s):void 0}function _arrayLikeToArray(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,o=new Array(s);t<s;t++)o[t]=e[t];return o}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var o=s[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var gamePlate=document.querySelector(".game-box__plate"),navBar=document.querySelector(".navbar"),gameList=document.querySelector(".navbar__list-game"),navItems=gameList.querySelectorAll(".navbar__list__item"),counterMines=document.querySelector(".counter-mines"),begginer=[8,8,10],intermediate=[16,16,40],expert=[31,16,99],bombsNumber=0,bombs=[],boxes=[],chosenLevel=begginer,countBoxes=function(e){return e[0]*e[1]},shuffle=function(e,s){for(var t=0;t<s;t++){var o=Math.floor(Math.random()*e);0===o||bombs.includes(o)?t--:bombs.push(o)}},GamePlate=_createClass(function e(s,t,o){_classCallCheck(this,e),this.id=s,this.bomb=t,this.bombsAround=o}),createGamePlate=function(e){for(var s=0;s<e;s++)checkBombAround(s,chosenLevel[0]),boxes[s]=new GamePlate(s,!1,bombsNumber),bombsNumber=0},plantBombs=function(){boxes.forEach(function(e){bombs.includes(e.id)&&(e.bomb=!0)})},drawGamePlate=function(e){for(var s=0;s<e;s++){var t=document.createElement("div");t.setAttribute("id",s),gamePlate.append(t),t.classList.add("game-box__plate__element")}counterMines.innerHTML="0".concat(chosenLevel[2])},clearPlate=function(){gamePlate.innerHTML="",bombs=[],boxes=[]},newGame=function(){clearPlate(),counterMines.innerHTML="0".concat(chosenLevel[2]),shuffle(countBoxes(chosenLevel),chosenLevel[2]),createGamePlate(countBoxes(chosenLevel)),plantBombs(),drawGamePlate(countBoxes(chosenLevel))},chooseLevel=function(e){clearPlate(),e.target.classList.contains("begginer")?(chosenLevel=begginer,gamePlate.classList.remove("plate-intermediate"),gamePlate.classList.remove("plate-expert"),gamePlate.classList.add("plate-begginer")):e.target.classList.contains("intermediate")?(chosenLevel=intermediate,gamePlate.classList.remove("plate-begginer"),gamePlate.classList.remove("plate-expert"),gamePlate.classList.add("plate-intermediate")):e.target.classList.contains("expert")&&(chosenLevel=expert,gamePlate.classList.remove("plate-begginer"),gamePlate.classList.remove("plate-intermediate"),gamePlate.classList.add("plate-expert")),navItems.forEach(function(e){return e.classList.toggle("navbar__list-game__item")}),newGame()},unfoldMenu=function(e){e.target.classList.contains("navbar__list-game")&&navItems.forEach(function(e){return e.classList.toggle("navbar__list-game__item")})},putFlag=function(e){e.preventDefault(),e.target.classList.toggle("put-flag")},showAll=function(){var e,s=gamePlate.getElementsByClassName("game-box__plate__element"),t=_createForOfIteratorHelper(boxes);try{for(t.s();!(e=t.n()).done;){var o=e.value;!0!==o.bomb||s[o.id].classList.contains("put-flag")||s[o.id].classList.add("show-bomb"),!1===o.bomb&&s[o.id].classList.contains("put-flag")&&s[o.id].classList.add("wrong-bet")}}catch(e){t.e(e)}finally{t.f()}},checkBombAround=function(e,s){0===e?(bombs.includes(e+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+(s+1))&&bombsNumber++):e===s-1?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+(s-1))&&bombsNumber++):e===s*s-s?(bombs.includes(e+1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-(s-1))&&bombsNumber++):e===s*s-1?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-(s+1))&&bombsNumber++):e%s==0?(bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s+1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s+1)&&bombsNumber++):(e+1)%s==0?(bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s-1)&&bombsNumber++,bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s-1)&&bombsNumber++):e-s<0?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e+s+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s-1)&&bombsNumber++,console.log("pokaz mnie to")):s*s-s<e?(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e-s+1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s-1)&&bombsNumber++):(bombs.includes(e-1)&&bombsNumber++,bombs.includes(e+1)&&bombsNumber++,bombs.includes(e-s+1)&&bombsNumber++,bombs.includes(e-s)&&bombsNumber++,bombs.includes(e-s-1)&&bombsNumber++,bombs.includes(e+s+1)&&bombsNumber++,bombs.includes(e+s)&&bombsNumber++,bombs.includes(e+s-1)&&bombsNumber++)},showEmpty=function(e){0===boxes[e.target.id].bombsAround&&e.target.classList.add("show-empty"),1===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-1")),2===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-2")),3===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-3")),4===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-4")),5===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-5")),6===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-6")),7===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-7")),8===boxes[e.target.id].bombsAround&&(console.log("dziala"),e.target.classList.add("show-number"),e.target.classList.add("show-number-8"))},leftClick=function(e){e.target.classList.contains("put-flag")?e.preventDefault():!1===boxes[e.target.id].bomb?showEmpty(e):!0===boxes[e.target.id].bomb&&(e.target.classList.add("show-trigger"),showAll())};navBar.addEventListener("click",unfoldMenu),navItems.forEach(function(e){return e.addEventListener("click",chooseLevel)}),gamePlate.addEventListener("contextmenu",putFlag),gamePlate.addEventListener("click",leftClick),newGame();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZ2FtZVBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmF2QmFyIiwiZ2FtZUxpc3QiLCJuYXZJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudGVyTWluZXMiLCJiZWdnaW5lciIsImludGVybWVkaWF0ZSIsImV4cGVydCIsImJvbWJzTnVtYmVyIiwiYm9tYnMiLCJib3hlcyIsImNob3NlbkxldmVsIiwiYm94ZXNBbW91bnQiLCJib21ic0Ftb3VudCIsImkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbmNsdWRlcyIsInJhbmRvbU51bSIsIkdhbWVQbGF0ZSIsImlkIiwiYm9tYiIsInNodWZmbGUiLCJ0aGlzIiwiYm9tYnNBcm91bmQiLCJjaGVja0JvbWJBcm91bmQiLCJwbGFudEJvbWJzIiwiYm94IiwiZW1wdHlCb3giLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kIiwiYWRkIiwiY29uY2F0IiwiY2xlYXJQbGF0ZSIsImlubmVySFRNTCIsImRyYXdHYW1lUGxhdGUiLCJjb3VudEJveGVzIiwiY3JlYXRlR2FtZVBsYXRlIiwiZSIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwibmV3R2FtZSIsInRvZ2dsZSIsIml0ZW0iLCJwcmV2ZW50RGVmYXVsdCIsInNob3dBbGwiLCJwbGF0ZUVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIl9pdGVyYXRvciIsInMiLCJfc3RlcCIsIm4iLCJkb25lIiwidmFsdWUiLCJ1bmZvbGRNZW51Iiwicm93TGVuZ3RoIiwiY29uc29sZSIsInNob3dFbXB0eSIsImxvZyIsImxlZnRDbGljayIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiY2hvb3NlTGV2ZWwiLCJwdXRGbGFnIl0sIm1hcHBpbmdzIjoiNmpEQUFBLElBQU1BLFVBQVlDLFNBQVNDLGNBQWMsa0JBQXZCLEVBQ1pDLE9BQVNGLFNB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QTVEQ29FLGlCQUFBLGNBQUFFLE9BNERELEVBQ0F0RSxVQTVES2EsaUJBQW1CZSxRQUFuQnNDLFNBNERMLEVBRUFsQixRQTVERSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVQbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWJveF9fcGxhdGUnKTtcclxuY29uc3QgbmF2QmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xyXG5jb25zdCBnYW1lTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXJfX2xpc3QtZ2FtZScpO1xyXG5jb25zdCBuYXZJdGVtcyA9IGdhbWVMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZiYXJfX2xpc3RfX2l0ZW0nKTtcclxuY29uc3QgY291bnRlck1pbmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdW50ZXItbWluZXMnKTtcclxuXHJcbmNvbnN0IGJlZ2dpbmVyID0gWzgsIDgsIDEwXTtcclxuY29uc3QgaW50ZXJtZWRpYXRlID0gWzE2LCAxNiwgNDBdO1xyXG5jb25zdCBleHBlcnQgPSBbMzEsIDE2LCA5OV07XHJcblxyXG5sZXQgYm9tYnNOdW1iZXIgPSAwO1xyXG5sZXQgYm9tYnMgPSBbXTtcclxubGV0IGJveGVzID0gW107XHJcbmxldCBjaG9zZW5MZXZlbCA9IGJlZ2dpbmVyO1xyXG5cclxuY29uc3QgY291bnRCb3hlcyA9IGNob3NlbkxldmVsID0+IHtcclxuXHRyZXR1cm4gY2hvc2VuTGV2ZWxbMF0gKiBjaG9zZW5MZXZlbFsxXTtcclxufTtcclxuXHJcbmNvbnN0IHNodWZmbGUgPSAoYm94ZXNBbW91bnQsIGJvbWJzQW1vdW50KSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBib21ic0Ftb3VudDsgaSsrKSB7XHJcblx0XHRsZXQgcmFuZG9tTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYm94ZXNBbW91bnQpO1xyXG5cdFx0aWYgKHJhbmRvbU51bSA9PT0gMCB8fCBib21icy5pbmNsdWRlcyhyYW5kb21OdW0pKSB7XHJcblx0XHRcdGktLTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGJvbWJzLnB1c2gocmFuZG9tTnVtKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5jbGFzcyBHYW1lUGxhdGUge1xyXG5cdGNvbnN0cnVjdG9yKGlkLCBib21iLCBib21ic0Fyb3VuZCkge1xyXG5cdFx0dGhpcy5pZCA9IGlkO1xyXG5cdFx0dGhpcy5ib21iID0gYm9tYjtcclxuXHRcdHRoaXMuYm9tYnNBcm91bmQgPSBib21ic0Fyb3VuZDtcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZUdhbWVQbGF0ZSA9IGJveGVzQW1vdW50ID0+IHtcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGJveGVzQW1vdW50OyBpKyspIHtcclxuXHRcdGNoZWNrQm9tYkFyb3VuZChpLCBjaG9zZW5MZXZlbFswXSk7XHJcblx0XHRib3hlc1tpXSA9IG5ldyBHYW1lUGxhdGUoaSwgZmFsc2UsIGJvbWJzTnVtYmVyKTtcclxuXHRcdGJvbWJzTnVtYmVyID0gMDtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBwbGFudEJvbWJzID0gKCkgPT4ge1xyXG5cdGJveGVzLmZvckVhY2goYm94ID0+IHtcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhib3guaWQpKSB7XHJcblx0XHRcdGJveC5ib21iID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdHYW1lUGxhdGUgPSBib3hlc0Ftb3VudCA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBib3hlc0Ftb3VudDsgaSsrKSB7XHJcblx0XHRsZXQgZW1wdHlCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGVtcHR5Qm94LnNldEF0dHJpYnV0ZSgnaWQnLCBpKTtcclxuXHRcdGdhbWVQbGF0ZS5hcHBlbmQoZW1wdHlCb3gpO1xyXG5cdFx0ZW1wdHlCb3guY2xhc3NMaXN0LmFkZCgnZ2FtZS1ib3hfX3BsYXRlX19lbGVtZW50Jyk7XHJcblx0fVxyXG5cdGNvdW50ZXJNaW5lcy5pbm5lckhUTUwgPSBgMCR7Y2hvc2VuTGV2ZWxbMl19YDtcclxuXHQvLyB0dSBtb3plIGZvckVhY2hlbXB0eUJveFxyXG59O1xyXG5cclxuY29uc3QgY2xlYXJQbGF0ZSA9ICgpID0+IHtcclxuXHRnYW1lUGxhdGUuaW5uZXJIVE1MID0gJyc7XHJcblx0Ym9tYnMgPSBbXTtcclxuXHRib3hlcyA9IFtdO1xyXG59O1xyXG5cclxuY29uc3QgbmV3R2FtZSA9ICgpID0+IHtcclxuXHRjbGVhclBsYXRlKCk7XHJcblx0Y291bnRlck1pbmVzLmlubmVySFRNTCA9IGAwJHtjaG9zZW5MZXZlbFsyXX1gO1xyXG5cdHNodWZmbGUoY291bnRCb3hlcyhjaG9zZW5MZXZlbCksIGNob3NlbkxldmVsWzJdKTtcclxuXHRjcmVhdGVHYW1lUGxhdGUoY291bnRCb3hlcyhjaG9zZW5MZXZlbCkpO1xyXG5cdHBsYW50Qm9tYnMoKTtcclxuXHRkcmF3R2FtZVBsYXRlKGNvdW50Qm94ZXMoY2hvc2VuTGV2ZWwpKTtcclxufTtcclxuXHJcbmNvbnN0IGNob29zZUxldmVsID0gZSA9PiB7XHJcblx0Y2xlYXJQbGF0ZSgpO1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JlZ2dpbmVyJykpIHtcclxuXHRcdGNob3NlbkxldmVsID0gYmVnZ2luZXI7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtaW50ZXJtZWRpYXRlJyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtZXhwZXJ0Jyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LmFkZCgncGxhdGUtYmVnZ2luZXInKTtcclxuXHR9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW50ZXJtZWRpYXRlJykpIHtcclxuXHRcdGNob3NlbkxldmVsID0gaW50ZXJtZWRpYXRlO1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXRlLWJlZ2dpbmVyJyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LnJlbW92ZSgncGxhdGUtZXhwZXJ0Jyk7XHJcblx0XHRnYW1lUGxhdGUuY2xhc3NMaXN0LmFkZCgncGxhdGUtaW50ZXJtZWRpYXRlJyk7XHJcblx0fSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGVydCcpKSB7XHJcblx0XHRjaG9zZW5MZXZlbCA9IGV4cGVydDtcclxuXHRcdGdhbWVQbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdwbGF0ZS1iZWdnaW5lcicpO1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXRlLWludGVybWVkaWF0ZScpO1xyXG5cdFx0Z2FtZVBsYXRlLmNsYXNzTGlzdC5hZGQoJ3BsYXRlLWV4cGVydCcpO1xyXG5cdH1cclxuXHRuYXZJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QudG9nZ2xlKCduYXZiYXJfX2xpc3QtZ2FtZV9faXRlbScpKTtcclxuXHJcblx0bmV3R2FtZSgpO1xyXG59O1xyXG5cclxuY29uc3QgdW5mb2xkTWVudSA9IGUgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdmJhcl9fbGlzdC1nYW1lJykpIHtcclxuXHRcdG5hdkl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ25hdmJhcl9fbGlzdC1nYW1lX19pdGVtJykpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHB1dEZsYWcgPSBlID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0ZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgncHV0LWZsYWcnKTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dBbGwgPSAoKSA9PiB7XHJcblx0Y29uc3QgcGxhdGVFbGVtZW50cyA9IGdhbWVQbGF0ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdnYW1lLWJveF9fcGxhdGVfX2VsZW1lbnQnKTtcclxuXHJcblx0Zm9yIChjb25zdCBib3ggb2YgYm94ZXMpIHtcclxuXHRcdGlmIChib3guYm9tYiA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRpZiAoIXBsYXRlRWxlbWVudHNbYm94LmlkXS5jbGFzc0xpc3QuY29udGFpbnMoJ3B1dC1mbGFnJykpIHtcclxuXHRcdFx0XHRwbGF0ZUVsZW1lbnRzW2JveC5pZF0uY2xhc3NMaXN0LmFkZCgnc2hvdy1ib21iJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChib3guYm9tYiA9PT0gZmFsc2UpIHtcclxuXHRcdFx0aWYgKHBsYXRlRWxlbWVudHNbYm94LmlkXS5jbGFzc0xpc3QuY29udGFpbnMoJ3B1dC1mbGFnJykpIHtcclxuXHRcdFx0XHRwbGF0ZUVsZW1lbnRzW2JveC5pZF0uY2xhc3NMaXN0LmFkZCgnd3JvbmctYmV0Jyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0JvbWJBcm91bmQgPSAoaSwgcm93TGVuZ3RoKSA9PiB7XHJcblx0Ly8gbGV0IGlkID0gTnVtYmVyLnBhcnNlRmxvYXQoZS50YXJnZXQuaWQpO1xyXG5cdC8vIGNvbnN0IHBsYXRlRWxlbWVudHMgPSBnYW1lUGxhdGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ2FtZS1ib3hfX3BsYXRlX19lbGVtZW50Jyk7XHJcblxyXG5cdGlmIChpID09PSAwKSB7XHJcblx0XHQvLyB0b3AtbGVmdCBjb3JuZXIgY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAocm93TGVuZ3RoICsgMSkpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChpID09PSByb3dMZW5ndGggLSAxKSB7XHJcblx0XHQvLyB0b3AtcmlnaHQgY29ybmVyIGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgKHJvd0xlbmd0aCAtIDEpKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaSA9PT0gcm93TGVuZ3RoICogcm93TGVuZ3RoIC0gcm93TGVuZ3RoKSB7XHJcblx0XHQvLyBib3R0b20tbGVmdCBjb3JuZXIgY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSAocm93TGVuZ3RoIC0gMSkpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChpID09PSByb3dMZW5ndGggKiByb3dMZW5ndGggLSAxKSB7XHJcblx0XHQvLyBib3R0b20tcmlnaHQgY29ybmVyIGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gKHJvd0xlbmd0aCArIDEpKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoaSAlIHJvd0xlbmd0aCA9PT0gMCkge1xyXG5cdFx0Ly8gc2lkZSBsZWZ0IGNoZWNrXHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoKGkgKyAxKSAlIHJvd0xlbmd0aCA9PT0gMCkge1xyXG5cdFx0Ly8gc2lkZSByaWdodCBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGkgLSByb3dMZW5ndGggPCAwKSB7XHJcblx0XHQvLyBzaWRlIHRvcCBjaGVja1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRjb25zb2xlLmxvZygncG9rYXogbW5pZSB0bycpO1xyXG5cdH0gZWxzZSBpZiAoaSA+IHJvd0xlbmd0aCAqIHJvd0xlbmd0aCAtIHJvd0xlbmd0aCkge1xyXG5cdFx0Ly8gc2lkZSBib3R0b20gY2hlY2tcclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoICsgMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpIC0gcm93TGVuZ3RoKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGggLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyB0aGUgcmVzdCBvZiBib3hlc1xyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGggKyAxKSkge1xyXG5cdFx0XHRib21ic051bWJlcisrO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvbWJzLmluY2x1ZGVzKGkgLSByb3dMZW5ndGgpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSAtIHJvd0xlbmd0aCAtIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCArIDEpKSB7XHJcblx0XHRcdGJvbWJzTnVtYmVyKys7XHJcblx0XHR9XHJcblx0XHRpZiAoYm9tYnMuaW5jbHVkZXMoaSArIHJvd0xlbmd0aCkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdGlmIChib21icy5pbmNsdWRlcyhpICsgcm93TGVuZ3RoIC0gMSkpIHtcclxuXHRcdFx0Ym9tYnNOdW1iZXIrKztcclxuXHRcdH1cclxuXHRcdC8vIGlmIChib21ic051bWJlciA9PT0gMCkge1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkIC0gMV0uY2xhc3NMaXN0LmFkZChgc2hvdy1udW1iZXJgKTtcclxuXHRcdC8vIFx0cGxhdGVFbGVtZW50c1tpZCArIDFdLmNsYXNzTGlzdC5hZGQoYHNob3ctbnVtYmVyYCk7XHJcblx0XHQvLyBcdHBsYXRlRWxlbWVudHNbaWQgLSByb3dMZW5ndGggKyAxXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkIC0gcm93TGVuZ3RoXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gXHRwbGF0ZUVsZW1lbnRzW2lkIC0gcm93TGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmFkZChgc2hvdy1udW1iZXJgKTtcclxuXHRcdC8vIFx0cGxhdGVFbGVtZW50c1tpZCArIHJvd0xlbmd0aCArIDFdLmNsYXNzTGlzdC5hZGQoYHNob3ctbnVtYmVyYCk7XHJcblx0XHQvLyBcdHBsYXRlRWxlbWVudHNbaWQgKyByb3dMZW5ndGhdLmNsYXNzTGlzdC5hZGQoYHNob3ctbnVtYmVyYCk7XHJcblx0XHQvLyBcdHBsYXRlRWxlbWVudHNbaWQgKyByb3dMZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKGBzaG93LW51bWJlcmApO1xyXG5cdFx0Ly8gfVxyXG5cdH1cclxuXHJcblx0Ly8gaWYgKGJvbWJzTnVtYmVyID09PSAwKSB7XHJcblx0Ly8gfVxyXG5cdC8vIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoYHNob3ctbnVtYmVyLSR7Ym9tYnNOdW1iZXJ9YCk7XHJcblx0Ly8gYm9tYnNOdW1iZXIgPSAwO1xyXG5cdC8vIGNvbnN0IGNoZWNrQm94ZXNBZ2FpbiA9ICgpID0+IHt9O1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0VtcHR5ID0gZSA9PiB7XHJcblx0Ly8gZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1lbXB0eScpO1xyXG5cdC8vIGNoZWNrQm9tYkFyb3VuZChlLCBjaG9zZW5MZXZlbFswXSk7XHJcblx0aWYgKGJveGVzW2UudGFyZ2V0LmlkXS5ib21ic0Fyb3VuZCA9PT0gMCkge1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1lbXB0eScpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSAxKSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItMScpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSAyKSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItMicpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSAzKSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItMycpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSA0KSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItNCcpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSA1KSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItNScpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSA2KSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItNicpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSA3KSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItNycpO1xyXG5cdH1cclxuXHRpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWJzQXJvdW5kID09PSA4KSB7XHJcblx0XHRjb25zb2xlLmxvZygnZHppYWxhJyk7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzaG93LW51bWJlcicpO1xyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hvdy1udW1iZXItOCcpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGxlZnRDbGljayA9IGUgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3B1dC1mbGFnJykpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHR9IGVsc2UgaWYgKGJveGVzW2UudGFyZ2V0LmlkXS5ib21iID09PSBmYWxzZSkge1xyXG5cdFx0c2hvd0VtcHR5KGUpO1xyXG5cdH0gZWxzZSBpZiAoYm94ZXNbZS50YXJnZXQuaWRdLmJvbWIgPT09IHRydWUpIHtcclxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Nob3ctdHJpZ2dlcicpO1xyXG5cdFx0c2hvd0FsbCgpO1xyXG5cdH1cclxufTtcclxuXHJcbi8vICBMaXN0ZW5lcnNcclxubmF2QmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5mb2xkTWVudSk7XHJcbm5hdkl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hvb3NlTGV2ZWwpKTtcclxuZ2FtZVBsYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHV0RmxhZyk7XHJcbmdhbWVQbGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxlZnRDbGljayk7XHJcblxyXG5uZXdHYW1lKCk7XHJcbiJdfQ==
